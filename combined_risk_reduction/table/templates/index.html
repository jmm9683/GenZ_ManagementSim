<!DOCTYPE html>
<html lang="en">
<head>
	<!--favicon-->

	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="">
	<meta name="author" content="">

	<!-- jQUuery imports -->
	<meta charset="utf-8">

	<link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
	<script
	  src="https://code.jquery.com/jquery-3.4.1.min.js"
	  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
	  crossorigin="anonymous">
	</script>
	<script type="text/javascript" src="http://code.jquery.com/ui/1.10.2/jquery-ui.js" ></script>

	<title>Senior Design Demo</title>

	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
	<!-- Load Ajax-->
	<script src="https://kit.fontawesome.com/ed884af876.js"></script>

	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link href="https://fonts.googleapis.com/css?family=Abel|Barlow&amp;display=swap" rel="stylesheet">

	<!-- Custom styles CSS -->
	<link href="{{ url_for('static', filename='css/indexstyle.css') }}" rel="stylesheet">
	<!-- google text fonts -->

</head>
	<body>
		<div style="padding:50px">
			<!-- table goes here-->

			<h1>Dell Senior Design Project Combined Risk Reduction</h1>

			<table style="width:100%">
			<thead>
				<tr>
					<td>id</td>
					<td>Name</td>
					<td>status</td>
					<td>address</td>
					<td>contexturl</td>
					<td>Last Updated</td>
					<td>Middleware Timestamp</td>
				</tr>
			</thead>

			<tbody>

				{% for component in components %}
				<tr>
					<td> {{component.id }} </td>
					<td> {{ component.name }} </td>
					<td id="{{'status'+component.id|string()}}"> {{ component.status }} </td>
					<td id="{{'address'+component.id|string()}}"> {{ component.address }} </td>
					<td id="{{'contexturl'+component.id|string()}}"> {{ component.contexturl }} </td>
					<td id="{{'updated'+component.id|string()}}"> {{ component.last_update }} </td>
					<td id="{{'lastupdated'+component.id|string()}}"> {{ component.last_update }} </td>
				</tr>
				{% endfor %}

			</tbody>


			</table>

		</div>

	<script>
  $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
  (function(){
				$.getJSON(
						$SCRIPT_ROOT+"/component/1", // Your AJAX route here
						function(data,i) {
								var today = new Date()
								$("#status1").text(data.status);
								$("#address1").text(data.address);
								$("#contexturl1").text(data.contexturl);
								$("#lastupdated1").text(data.last_update);
								$("#updated1").text(
									today.getMonth()+"/"+today.getDate()+"/"+today.getFullYear()+"	"+
									today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds() +"."+today.getMilliseconds());
						}
				);
			// run every 10 seconds
      setTimeout(arguments.callee, 10000);
  })();
	</script>

	<script>
	$SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
	(function(){
				$.getJSON(
						$SCRIPT_ROOT+"/component/2", // Your AJAX route here
						function(data,i) {
								var today = new Date()
								$("#status2").text(data.status);
								$("#address2").text(data.address);
								$("#contexturl2").text(data.contexturl);
								$("#lastupdated2").text(data.last_update);
								$("#updated2").text(
									today.getMonth()+"/"+today.getDate()+"/"+today.getFullYear()+"	"+
									today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds() +"."+today.getMilliseconds());
						}
				);
			// run every 10 seconds
			setTimeout(arguments.callee, 10000);
	})();
	</script>

	<script>
	$SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
	(function(){
				$.getJSON(
						$SCRIPT_ROOT+"/component/3", // Your AJAX route here
						function(data,i) {
								var today = new Date()
								$("#status3").text(data.status);
								$("#address3").text(data.address);
								$("#contexturl3").text(data.contexturl);
								$("#lastupdated3").text(data.last_update);
								$("#updated3").text(
									today.getMonth()+"/"+today.getDate()+"/"+today.getFullYear()+"	"+
									today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds() +"."+today.getMilliseconds());
						}
				);
			// run every 10 seconds
			setTimeout(arguments.callee, 10000);
	})();
	</script>

	<script>
	$SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
	(function(){
				$.getJSON(
						$SCRIPT_ROOT+"/component/5", // Your AJAX route here
						function(data,i) {
								var today = new Date()
								$("#status5").text(data.status);
								$("#address5").text(data.address);
								$("#contexturl5").text(data.contexturl);
								$("#lastupdated5").text(data.last_update);
								$("#updated5").text(
									today.getMonth()+"/"+today.getDate()+"/"+today.getFullYear()+"	"+
									today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds() +"."+today.getMilliseconds());
						}
				);
			// run every 10 seconds
			setTimeout(arguments.callee, 10000);
	})();
	</script>


	<script>
	$SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
	(function(){
				$.getJSON(
						$SCRIPT_ROOT+"/component/4", // Your AJAX route here
						function(data,i) {
								var today = new Date()
								$("#status4").text(data.status);
								$("#address4").text(data.address);
								$("#contexturl4").text(data.contexturl);
								$("#lastupdated4").text(data.last_update);
								$("#updated4").text(
									today.getMonth()+"/"+today.getDate()+"/"+today.getFullYear()+"	"+
									today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds() +"."+today.getMilliseconds());
						}
				);
			// run every 10 seconds
			setTimeout(arguments.callee, 10000);
	})();
	</script>

	<!-- <script>
	// $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
	// (function(){
	// 			$.getJSON(
	// 					$SCRIPT_ROOT+"/components", // Your AJAX route here
	// 					function(data) {
	// 							for(var i in data){
	// 								alert(i.id)
	// 								var today = new Date()
	// 								$("#status"+i.id).text(i.status);
	// 								$("#updated"+i.id).text(
	// 									today.getMonth()+"/"+today.getDate()+"/"+today.getFullYear()+"	"+
	// 									today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds() +"."+today.getMilliseconds());
	// 							}
	// 					}
	// 			);
	// 		// run every 10 seconds
	// 		setTimeout(arguments.callee, 10000);
	// })();
	</script> -->

	<style>
	.table {
			border-collapse:collapse;
			width: 100%;
			}
	.td {
			padding: 7px;
			border:1px solid;
	}
	</style>


	</body>




</html>
